on:
  schedule:
    - cron:  '0 */2 * * *'
name: Scrape Telegram DLib API
jobs:
  wget:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master

    - name: wget
      uses: wei/wget@v1
      with:
        args: -O tdlib.tl https://github.com/tdlib/td/raw/master/td/generate/scheme/telegram_api.tl

    - name: Commit and push changes.
      run: |
          git checkout main

          git config --global user.email "levlam@telegram.org"
          git config --global user.name "GitHub Action <Aliaksei Levin>"

          git commit -am "update TDLib API scheme."
          git push
